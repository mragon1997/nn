!function(e){function t(t){for(var o,r,c=t[0],s=t[1],l=t[2],d=0,m=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&m.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(u&&u(t);m.length;)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},a={0:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var c=window["webpackJsonpgift-coupon"]=window["webpackJsonpgift-coupon"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([9,1]),n()}([,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(7),r=n.n(i),c=n(1),s=n(2),l=n(4),u=n(3),d=n(5),m=(n(14),navigator.userAgent),p={wq:1,m:2,pc:2};function f(){var e=/MicroMessenger/i.test(m),t=-1!==m.indexOf("Android"),n=-1!==m.indexOf("iphone"),o=-1!==m.indexOf("ipad"),a=function(){var e=n||o;return!/jdapp/i.test(m)&&(e?/ QQ/i.test(m):!!t&&(/MQQBrowser/i.test(m)&&/QQ/i.test(m.split("MQQBrowser"))))}();return window._force?window._force:e||a?"wq":"m"}function h(){for(var e=m,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,o=0;o<t.length;o++)if(e.indexOf(t[o])>0){n=!1;break}return n}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=encodeURIComponent((-1!==location.href.indexOf("loginback")?location.href:location.href+"&loginback=1")+e);return"wq"===f()?"https://wq.jd.com/pinbind/pintokenredirect?biz=jingfen&url="+t:"https://passport.m.jd.com/user/login.action?returnurl="+t},v=function(e){return h()?"https://item.jd.com/".concat(e,".html"):"wq"===f()?"https://wqitem.jd.com/item/view?sku=".concat(e,"&PTAG=17047.12.1"):"https://item.m.jd.com/product/".concat(e,".html?PTAG=17051.5.1")},w=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):""},b=function(){var e=window.location.href;if(/u.jd.com/.test(e))return e.substr(17)},y=function(e){var t=w("d")||b();return"https://wq.jd.com/pingou_api/GetCpsGroup?sku_id=".concat(e,"&from=cps&d=").concat(t)},E=function(e){var t=document.getElementsByClassName("topTip")[0];t.querySelector("span").innerText=e,t.style.display="block",setTimeout(function(){t.style.display="none"},2e3)};function k(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):""}var j={autoScale:function(){var e=document.body.clientWidth>600?600:document.body.clientWidth;document.querySelector("html").setAttribute("style","font-size:"+100*e/375+"px")},fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.serverDomain,a=void 0===o?"api.m.jd.com":o,i="api.m.jd.com"===a?"https://":"http://";"wq"===f()&&(t.loginType="wq",t.wxtoken=k("wq_auth_token"));var r=(new Date).getTime(),c=i+a+"/api?"+n+"functionId="+e+"&client=wh5&appid=u&clientVersion=2.0.0&body="+encodeURIComponent(JSON.stringify(t))+"&loginType="+p[h()?"pc":f()]+("wq"===f()?"&loginWQBiz=union_promotion":"")+"&_t="+r;return fetch(c,{credentials:"include"}).then(function(e){return e.json()})}),showMsgAndJumpSku:function(e,t,n){E(e),setTimeout(function(){location.href=n?y(t):v(t)},2e3)},getCookie:k,getParam:function(){var e={},t=location.search;return t.length<=1?e:(t.substr(1).split("&").forEach(function(t){var n=t.match(/([^=]+)=(.*)/);n&&3===n.length&&(e[n[1]]=n[2])}),e)},getQueryString:w,getDparam:b,getSkuUrl:v,getPingouUrl:y,getLoginUrl:g,getEnv:f,getPlatform:function(){var e=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(m),t=m.toLowerCase().indexOf("jdapp")>-1,n="wq"===f();return console.log("Turbo Console Log: getPlatform -> isApp",t),console.log("Turbo Console Log: getPlatform -> isMobile",e),console.log("Turbo Console Log: getPlatform -> isWQ",n),e?n?1:t?4:2:3},isWeChat:function(){return/MicroMessenger/i.test(m)},showError:E,login:function(e){location.href=g(e)},imgHeader:"https://img12.360buyimg.com/cms/",dateFormat:function(e){var t=new Date(e),n=t.getFullYear(),o=t.getMonth()+1,a=t.getDate();return"".concat(n,".").concat(o>9?o:"0".concat(o),".").concat(a>9?a:"0".concat(a))}},N=n(8);function C(e){var t={},n=e||location.search;return n.length<=1?t:(n.substr(1).split("&").forEach(function(e){var n=e.match(/([^=]+)=(.*)/);n&&3===n.length&&(t[n[1]]=n[2])}),t)}var O="__jsonp__"+(new Date).getTime().toString().slice(-5);function S(e,t){return this.url=e,this.queue=[],this.always=function(){},this.catchError=function(e){throw e},this.callbackName=t.callbackName,this.fetch()}window[O]={},S.prototype={then:function(e){return this.queue.push(e),this},catch:function(e){return e instanceof Function&&(this.catchError=e),this},fetch:function(){var e,t=document.createElement("script"),n=this.url.split("?"),o=this.callbackName||"jsonp",a="jsonp_"+(new Date).getTime().toString().slice(-1)+Math.floor(1e6*Math.random());t.setAttribute("type","text/javascript"),t.src=n[0]+"?"+o+"="+a+"&"+n[1],window[O][a]={name:a,path:t.src.split("?")[0],query:(e=C("?"+t.src.split("?")[1]),e.body&&(e.body=decodeURIComponent(e.body)),e),response:""};var i=this;return window[a]=function(e){var n=e;try{"function"===typeof i.always&&i.always();for(var o=0;o<i.queue.length;o++)e=i.queue[o](e);"ActiveXObject"in window&&(document.getElementsByTagName("body")[0].style.color="#000"),i.queue.length=0,document.getElementsByTagName("body")[0].removeChild(t),window[a]=null,window[O][a].response=n,function(e){if(window.__jfdebug__){var t=document.body;Object.keys(e).map(function(n){var o=document.createElement("p");o.style.maxWidth="600px",o.style.wordWrap="break-word",o.innerHTML='<span style="color:#00b2b3">'.concat(n,"</span>: \n").concat(JSON.stringify(e[n])),t.appendChild(o)}),t.appendChild(document.createElement("br")),t.appendChild(document.createElement("hr")),t.appendChild(document.createElement("br"))}}(window[O][a])}catch(r){i.catchError(r)}},document.getElementsByTagName("body")[0].appendChild(t),this},always:function(e){return this.always=e,this}};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach(function(t){Object(N.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I="api.m.jd.com",_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I="union-mock.jd.com/doles/app/mock/18/showUnionGiftCoupon",e.serverDomain=I;var t=T({},e,{eid:"-1",fp:"-1",shshshfp:"-1",shshshfpa:"-1",shshshfpb:"-1",referUrl:document.referrer?document.referrer:"-1",childActivityUrl:window.location.href?window.location.href:"-1",pageClickKey:"MJDAlliance_CheckDetail"});return j.fetch("showUnionGiftCoupon",t)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I="union-mock.jd.com/doles/app/mock/18/gift/getUnionGiftCoupon",e.serverDomain=I;var t={},n=j.getCookie("wq_auth_token");if(window.getFingerPrint&&window.getJdEid){var o=window.getFingerPrint(),a=window.getJdEid();t=T({},e,{wxtoken:n,eid:a&&a.eid?a.eid:"-1",fp:a&&a.fp?a.fp:"-1",shshshfp:o&&o[0]?o[0]:"-1",shshshfpa:o&&o[1]?o[1]:"-1",shshshfpb:o&&o[2]?o[2]:"-1",referUrl:document.referrer?document.referrer:"-1",childActivityUrl:window.location.href,pageClickKey:"MJDAlliance_CheckDetail"})}else t=T({},e,{wxtoken:n,eid:"",fp:"",shshshfp:"-1",shshshfpa:"-1",shshshfpb:"-1",referUrl:document.referrer?document.referrer:"-1",childActivityUrl:window.location.href?window.location.href:"-1",pageClickKey:"MJDAlliance_CheckDetail"});return j.fetch("getUnionGiftCoupon",t)},U=function(e){return new S("https://wq.jd.com/pingou_api/getskusprice?skuids=".concat(e,"&area=&platform=3&origin=2&source=pingou&_=").concat((new Date).getTime(),"&g_ty=ls"),{callbackName:"callback"}||{})};function M(e){try{var t=e.eventId,n=new MPing.inputs.Click(t);e.param?!function(e){return"[object Array]"===Object.prototype.toString.call(e)}(e.param)?n.event_param=e.param:n.event_param=e.param.join("_"):n.event_param="",e.level&&(n.event_level=e.level),n.updateEventSeries(),(new MPing).send(n)}catch(o){}}var x=function(){try{var e=new MPing.inputs.PV;(new MPing).send(e)}catch(t){}},q=function(){M({eventId:"giftcoupon_1566987803199|3"})},A=function(){M({eventId:"giftcoupon_1566987803199|4"})},R=function(){M({eventId:"giftcoupon_1566987803199|5"})};var L=function(){function e(e,t){navigator.userAgent.match(/supportJDSHWK/i)||1===window._is_jdsh_wkwebview?window.webkit.messageHandlers.JDAppUnite.postMessage({method:e,params:t}):window.JDAppUnite&&window.JDAppUnite[e](t)}return new Promise(function(t,n){window.jdUnionGetUnpl={h5GetUnpl:function(e){console.log("Turbo Console Log: getUnpl -> res",e);var n=JSON.parse(e).data.unpl;n&&(document.cookie="unpl="+n+";path=/;domain=.jd.com ",t(n))}},e("notifyMessageToNative",JSON.stringify({businessType:"unpl",callBackName:"jdUnionGetUnpl.h5GetUnpl"}))})},B=(n(15),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={result:0,timer:{},isEnd:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("span",null,function(e){var t=e/1e3/60/60,n=Math.floor(t),o=e/1e3/60-60*n,a=Math.floor(o),i=e/1e3-3600*n-60*a,r=Math.floor(i);return"".concat(n>9?n:"0".concat(n),":").concat(a>9?a:"0".concat(a),":").concat(r>9?r:"0".concat(r))}(this.state.result))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.beginTime,o=t.endTime-n;this.setState({result:o},function(){e.startCountDown()})}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.isEnd){var t=this.props,n=t.beginTime,o=t.endTime-n;this.setState({result:o,isEnd:!1},function(){e.startCountDown()})}}},{key:"startCountDown",value:function(){var e=this,t=setInterval(function(){e.state.result<=0?(clearInterval(e.state.timer),e.props.countdownEnd&&e.setState({isEnd:!0},function(){e.props.countdownEnd()})):e.setState({result:e.state.result-1e3})},1e3);this.setState({timer:t})}}]),t}(a.a.Component));var G=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.coupon,t=e.discount,n=e.couponType,o=e.status,i=e.beginTime,r=e.endTime,c=e.addDays,s=e.currentTime;return a.a.createElement("div",null,a.a.createElement("div",{className:"coupon ".concat(1===n?"yellow":"red").concat(2===o||3===o?"Light":"")},a.a.createElement("div",{className:"couponBody"},a.a.createElement("div",{className:"couponLeft"},a.a.createElement("div",{className:"couponAmount"},a.a.createElement("span",{className:"label"},"\uffe5"),a.a.createElement("span",{className:"deno"},t))),a.a.createElement("div",{className:"couponRight"},a.a.createElement("div",{className:"couponContent"},a.a.createElement("div",{className:"couponTitle"},1===n?"\u4f18\u60e0\u5238":"\u4eac\u4eab\u793c\u91d1"),a.a.createElement("div",{className:"couponValidity"},"\u9886\u53d6\u4e4b\u65e5\u8d77",c,"\u5929\u6709\u6548"))),4===o&&(s>=i-864e5?a.a.createElement("div",{className:"countdown"},"\u8ddd\u5f00\u59cb\u9886\u53d6",a.a.createElement(B,{beginTime:s,endTime:i,countdownEnd:this.props.refreshStatus})):a.a.createElement("div",{className:"willBegin"},"\u5373\u5c06\u5f00\u59cb")),0===o&&s>=r-864e5&&a.a.createElement("div",{className:"countdown"},"\u8ddd\u7ed3\u675f\u9886\u53d6",a.a.createElement(B,{beginTime:s,endTime:r,countdownEnd:this.props.refreshStatus})),3===o&&a.a.createElement("div",{className:"invalid expired"}),2===o&&a.a.createElement("div",{className:"invalid soldout"}),1===o&&a.a.createElement("div",{className:"invalid received"}))))}}]),t}(a.a.Component),W=(n(16),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={price:"",priceUsecoupon:""},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.sku,t=e.skuName,n=e.skuImg,o=e.commentNum;return a.a.createElement("div",{className:"sku",onClick:this.goProduct.bind(this)},a.a.createElement("div",{className:"skuTitle"},"\u798f\u5229\u53ef\u7528\u4e8e\u4ee5\u4e0b\u5546\u54c1"),a.a.createElement("div",{className:"skuCard"},a.a.createElement("div",{className:"skuLeft"},a.a.createElement("img",{className:"skuImg",src:n,alt:""})),a.a.createElement("div",{className:"skuRight"},a.a.createElement("div",{className:"skuName"},t),a.a.createElement("div",{className:"skuInfo"},a.a.createElement("div",{className:"linePrice"},"\xa5",this.state.price),a.a.createElement("div",{className:"favourRate"},"\u8bc4\u8bba\u6570",o)),a.a.createElement("div",{className:"welfarePrice"},a.a.createElement("span",{className:"text"},"\u798f\u5229\u4ef7"),a.a.createElement("span",{className:"label"},"\uffe5"),a.a.createElement("div",{className:"amount"},this.state.priceUsecoupon)))))}},{key:"componentDidMount",value:function(){var e=this,t=j.getQueryString("sku");U(t).then(function(t){if(console.log("Turbo Console Log: Sku -> componentDidMount -> res",t),t.length>0){var n=t[0].p,o=t[0].bp,a=Number(n),i="";if(a>0){var r=e.props.discount;console.log("Turbo Console Log: Sku -> componentDidMount -> discount",r),i=n,i=o?(o-r).toFixed(2):(a-r).toFixed(2)}else a="\u5df2\u4e0b\u67b6",i="\u5df2\u4e0b\u67b6";e.setState({price:a,priceUsecoupon:i})}})}},{key:"goProduct",value:function(){A(),location.href="https://item.m.jd.com/product/".concat(this.props.skuId,".html")}}]),t}(a.a.Component)),J=(n(17),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"explain"},a.a.createElement("div",{className:"explainTitle"},"\u9886\u53d6\u8bf4\u660e"),a.a.createElement("div",{className:"explainContent"},a.a.createElement("div",{className:"explainItem"},"1\uff0c\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49"),a.a.createElement("div",{className:"explainItem"},"2\uff0c\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7 \u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7 \u54c1\u5b9a\u4e49\u4e49"),a.a.createElement("div",{className:"explainItem"},"3\uff0c\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7 \u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7 \u54c1\u5b9a\u4e49\u4e49"),a.a.createElement("div",{className:"explainItem"},"4\uff0c\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7 \u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7\u54c1\u5b9a\u4e49\u5177\u4f53\u6587\u6848\u6839\u636e\u4ea7 ")))}}]),t}(a.a.Component)),Q=(n(18),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.gitfDeno,o=e.giftResult,i=e.couponDeno,r=e.couponResult;return t&&a.a.createElement("div",{className:"modal"},a.a.createElement("div",{className:"modalDialog"},a.a.createElement("div",{className:"modalContent"},a.a.createElement("div",{className:"modalItem"},a.a.createElement("div",{className:"itemLeft"},a.a.createElement("img",{className:"giftImg",src:"//img13.360buyimg.com/devfe/jfs/t1/66379/38/8613/2449/5d68d46cE268dcc6e/c724be3cb1e6cc72.png",alt:""}),a.a.createElement("div",{className:"itemInfo"},"\u4eac\u7c89\u793c\u91d1 \xa5",n)),a.a.createElement("div",{className:"itemRight ".concat(200===o.code?"":"failed")},200===o.code?"\u9886\u53d6\u6210\u529f":"\u9886\u53d6\u5931\u8d25")),a.a.createElement("div",{className:"modalItem"},a.a.createElement("div",{className:"itemLeft"},a.a.createElement("img",{className:"couponImg",src:"//img12.360buyimg.com/devfe/jfs/t1/53745/24/9197/2878/5d68d48bE404362df/d5c805934b3a7649.png",alt:""}),a.a.createElement("div",{className:"itemInfo"},"\u4f18\u60e0\u5238 \xa5",i)),a.a.createElement("div",{className:"itemRight ".concat(200===r.code?"":"failed")},200===r.code?"\u9886\u53d6\u6210\u529f":"\u9886\u53d6\u5931\u8d25"))),a.a.createElement("div",{className:"modalBottom"},"\u6b63\u5728\u8df3\u8f6c\u81f3\u5546\u8be6\u9875...")))}}]),t}(a.a.Component));j.autoScale(),window.addEventListener("orientationchange",function(){j.autoScale()},!1);var F=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={modalShow:!1,buttonStatus:0,skuInfo:{},giftInfo:{},couponInfo:{},giftResult:0,couponResult:0,sku:0,q:"",d:"",discount:0},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"giftCouponContainer"},a.a.createElement("div",{className:"topContent"},a.a.createElement(G,{coupon:this.state.giftInfo,refreshStatus:this.showUnionGiftCoupon.bind(this)}),a.a.createElement(G,{coupon:this.state.couponInfo}),(0===this.state.couponInfo.status||0===this.state.giftInfo.status)&&a.a.createElement("div",{onClick:this.receiveCoupon.bind(this),className:"button"}," \u7acb\u5373\u9886\u53d6"),0!==this.state.couponInfo.status&&0!==this.state.giftInfo.status&&(4===this.state.giftInfo.status?a.a.createElement("div",{className:"button dark"},"\u5373\u5c06\u7acb\u5373\u9886\u53d6"):a.a.createElement("div",{className:"button",onClick:this.goProduct.bind(this,this.state.sku)},"\u76f4\u63a5\u4e70\u4e5f\u5212\u7b97"))),a.a.createElement(W,{sku:this.state.skuInfo,skuId:this.state.sku,discount:this.state.discount}),a.a.createElement(J,null),a.a.createElement(Q,{show:this.state.modalShow,gitfDeno:this.state.giftInfo.discount,giftResult:this.state.giftResult,couponDeno:this.state.couponInfo.discount,couponResult:this.state.couponResult}))}},{key:"componentDidMount",value:function(){var e=this;x();var t=j.getQueryString("sku"),n=j.getQueryString("q"),o=j.getQueryString("d");this.setState({sku:t,q:n,d:o,platform:j.getPlatform()},function(){4===j.getPlatform()?L().then(function(){e.showUnionGiftCoupon()}):e.showUnionGiftCoupon()})}},{key:"showUnionGiftCoupon",value:function(){var e=this,t=this.state,n={sku:t.sku,q:t.q,d:t.d,platform:j.getPlatform()};console.log("Turbo Console Log: Container -> showUnionGiftCoupon -> param",n),_(n).then(function(t){if(console.log("TCL: Container -> componentDidMount -> res",t),200===t.code){var n=t.data.giftCoupon,o=t.data.commonCoupon,a=n.discount||0,i=o.discount||0;e.setState({skuInfo:t.data.skuInfo,giftInfo:n,couponInfo:o,discount:Number(a)+Number(i)})}else-2===t.code&&j.login()})}},{key:"receiveCoupon",value:function(){var e=this;q(0);var t={q:this.state.q,platform:j.getPlatform()};console.log("Turbo Console Log: Container -> receiveCoupon -> param",t),D(t).then(function(t){console.log("TCL: Container -> receiveCoupon -> res",t),200===t.code?(R(),e.setState({couponResult:t.data.commonCoupon,giftResult:t.data.giftCoupon,modalShow:!0})):-2===t.code&&j.login()})}},{key:"goProduct",value:function(e){console.log("Turbo Console Log: Container -> goProduct -> sku",e),location.href="https://item.m.jd.com/product/".concat(e,".html")}}]),t}(a.a.Component),H=(n(19),n(20),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function K(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(a.a.createElement(F,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");H?(!function(e,t){fetch(e).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):K(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):K(t,e)})}}()}]);